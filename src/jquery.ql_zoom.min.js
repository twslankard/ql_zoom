$.fn.imagesLoaded=function(b){var h=this.filter("img"),c=h.length;h.bind("load",function(){--c<=0&&b.call(h,this)}).each(function(){if(this.complete||this.complete===undefined){var n=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=n}});return this};
(function(b,h){var c=b.jQuery||b.Cowboy||(b.Cowboy={}),n;c.throttle=n=function(l,i,e,k){function f(){function j(){m=+new Date;e.apply(r,u)}function s(){d=h}var r=this,t=+new Date-m,u=arguments;k&&!d&&j();d&&clearTimeout(d);if(k===h&&t>l)j();else if(i!==true)d=setTimeout(k?s:j,k===h?l-t:l)}var d,m=0;if(typeof i!=="boolean"){k=e;e=i;i=h}if(c.guid)f.guid=e.guid=e.guid||c.guid++;return f};c.debounce=function(l,i,e){return e===h?n(l,i,false):n(l,e,i!==false)}})(this);
(function(b){b.fn.ql_zoom=function(h){var c=b.extend({},b.fn.ql_zoom.defaultOptions,h);return this.each(function(){function n(o){var g,a;a=p;g=q;o=[o.pageX-e.left-~~(a/2),o.pageY-e.top-~~(g/2)];d.css({left:o[0]+"px",top:o[1]+"px"});g=d.position();var v,w,z,A,x,y;a=g.left*s/t+p/2;g=g.top*r/u+q/2;v=p;w=q;A=z=0;x=p;y=q;if(a>s-p)x=v=s-a;if(g>r-q)y=w=r-g;if(a<0){z=Math.abs(a);x=v=p+a;a=0}if(g<0){A=Math.abs(g);y=w=q+g;g=0}a=[~~a,~~g,~~v,~~w,~~z,~~A,~~x,~~y];B.html("sx = "+a[0]+", sy ="+a[1]+", sW = "+a[2]+
", sH ="+a[3]+", dx = "+a[4]+", dy ="+a[5]+", dW = "+a[6]+", dH ="+a[7]+", pageX ="+o[0]+", pageY ="+o[1]);try{i.clearRect(0,0,400,400);i.drawImage(m[0],a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7])}catch(C){console.dir(C)}}function l(){f.mouseenter(function(){d.fadeIn(c.speed)}).mouseleave(function(){d.fadeOut(c.speed)}).mousemove(b.throttle(c.throttle,n));b(window).resize(function(){e=f.offset()})}var i,e,k=(new Date).getTime(),f=b(this),d=b("<canvas>",{id:"viewer"+k,style:c.canvas_style}),m,j,s,r,t,
u,p=parseInt(c.width,10),q=parseInt(c.height,10),B=b("#output");(function(){if(/IMG/.test(b(this)[0].nodeName)===true){f.wrapAll(b("<div>",{id:"ql_zoom_"+k,"class":"ql_zoom_container"}));f=b("#ql_zoom_"+k)}j=f.find("img").first();u=j.height();t=j.width();m=b("<img>",{src:j.data("url")?j.data("url"):j.attr("src"),style:"display:none;"}).appendTo(f);m.imagesLoaded(function(){r=m.height();s=m.width()});d.appendTo(f);d.css({width:c.width,height:c.height});d[0].setAttribute("width",p);d[0].setAttribute("height",
q);/static/.test(void 0)&&f.css("position","relative");f.css({overflow:"hidden",cursor:c.pointer});e=f.offset();i=d.get()[0].getContext("2d");l()})()})};b.fn.ql_zoom.defaultOptions={width:"200px",height:"200px",speed:"800",throttle:50,pointer:"crosshair",canvas_style:"display:none; position:absolute; border:1px solid #444;"}})(jQuery);
