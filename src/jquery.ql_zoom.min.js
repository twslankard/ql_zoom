(function(b){b.fn.imagesLoaded=function(k){var c=this.filter("img"),n=c.length;c.bind("load",function(){--n<=0&&k.call(c,this)}).each(function(){if(this.complete||this.complete===undefined){var i=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=i}});return this}})(jQuery);
(function(b,k){var c=b.jQuery||b.Cowboy||(b.Cowboy={}),n;c.throttle=n=function(i,g,e,l){function f(){function j(){m=+new Date;e.apply(o,s)}function p(){d=k}var o=this,q=+new Date-m,s=arguments;l&&!d&&j();d&&clearTimeout(d);if(l===k&&q>i)j();else if(g!==true)d=setTimeout(l?p:j,l===k?i-q:i)}var d,m=0;if(typeof g!=="boolean"){l=e;e=g;g=k}if(c.guid)f.guid=e.guid=e.guid||c.guid++;return f};c.debounce=function(i,g,e){return e===k?n(i,g,false):n(i,e,g!==false)}})(this);
(function(b){b.fn.ql_zoom=function(k){var c=b.extend({},b.fn.ql_zoom.defaultOptions,k);return this.each(function(){function n(r){var h,a;a=t;h=u;r=[r.pageX-e.left-~~(a/2),r.pageY-e.top-~~(h/2)];d.css({left:r[0]+"px",top:r[1]+"px"});h=d.position();var v,w,x,y;a=h.left*p/q+t/2;h=h.top*o/s+u/2;v=t;w=u;x=t;y=u;if(a>p-t)x=v=p-a;if(h>o-u)y=w=o-h;if(a<0)a=0;if(h<0)h=0;a=[~~a,~~h,~~v,~~w,0,0,~~x,~~y];z.html("sx = "+a[0]+", sy ="+a[1]+", sW = "+a[2]+", sH ="+a[3]+", dx = "+a[4]+", dy ="+a[5]+", dW = "+a[6]+
", dH ="+a[7]+", pageX ="+r[0]+", pageY ="+r[1]);try{g.clearRect(0,0,400,400);g.drawImage(m[0],a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7])}catch(A){console.dir(A)}}function i(){if(o<=s+s/10)return false;if(p<=q+q/10)return false;f.mouseenter(function(){d.fadeIn(c.speed)}).mouseleave(function(){d.fadeOut(c.speed)}).mousemove(b.throttle(c.throttle,n));b(window).resize(function(){e=f.offset()})}var g,e,l=(new Date).getTime(),f=b(this),d=b("<canvas>",{id:"viewer"+l,style:"display:none; position:absolute; "+
c.canvas_style}),m,j,p,o,q,s,t=parseInt(c.width,10),u=parseInt(c.height,10),z=b("#output");(function(){if(/IMG/.test(b(this)[0].nodeName)===true){f.wrapAll(b("<div>",{id:"ql_zoom_"+l,"class":"ql_zoom_container"}));f=b("#ql_zoom_"+l)}j=f.find("img").first();s=j.height();q=j.width();m=b("<img>",{src:j.data("url")?j.data("url"):j.attr("src"),style:"display:none;"}).appendTo(f);d.appendTo(f);d.css({width:c.width,height:c.height});d[0].setAttribute("width",t);d[0].setAttribute("height",u);/static/.test(void 0)&&
f.css("position","relative");f.css({overflow:"hidden",cursor:c.pointer});e=f.offset();g=d.get()[0].getContext("2d");m.imagesLoaded(function(){o=m.height();p=m.width();i()})})()})};b.fn.ql_zoom.defaultOptions={width:"200px",height:"200px",speed:"800",throttle:50,pointer:"crosshair",canvas_style:"border:1px solid #444;"}})(jQuery);
