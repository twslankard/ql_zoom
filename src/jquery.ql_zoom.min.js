(function(a){a.fn.imagesLoaded=function(j){var c=this.filter("img"),q=c.length;c.bind("load",function(){--q<=0&&j.call(c,this)}).each(function(){if(this.complete||this.complete===undefined){var i=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=i}});return this}})(jQuery);
(function(a,j){var c=a.jQuery||a.Cowboy||(a.Cowboy={}),q;c.throttle=q=function(i,g,e,k){function f(){function h(){o=+new Date;e.apply(l,p)}function m(){d=j}var l=this,n=+new Date-o,p=arguments;k&&!d&&h();d&&clearTimeout(d);if(k===j&&n>i)h();else if(g!==true)d=setTimeout(k?m:h,k===j?i-n:i)}var d,o=0;if(typeof g!=="boolean"){k=e;e=g;g=j}if(c.guid)f.guid=e.guid=e.guid||c.guid++;return f};c.debounce=function(i,g,e){return e===j?q(i,g,false):q(i,e,g!==false)}})(this);
(function(a){a.fn.ql_zoom=function(j){var c=a.extend({},a.fn.ql_zoom.defaultOptions,j);return this.each(function(){function q(b){var r;b=[b.pageX-e.left-~~(s/2),b.pageY-e.top-~~(v/2)];d.css({left:b[0]+"px",top:b[1]+"px"});r=d.position();b=r.left;r=r.top;var t,u,w,x,y,z,A,B;t=b*m/n+s/(m/n)/2;u=r*l/p+s/(l/p)/2;w=s;x=v;z=y=0;A=s;B=v;if(t>m-s)w=A=m-t;if(u>l-v)B=x=l-u;if(t<0){y=Math.abs(b)+b/(m/n);t=0}if(u<0){z=Math.abs(r)+r/(l/p);u=0}b=[~~t,~~u,~~w,~~x,~~y,~~z,~~A,~~B];try{g.clearRect(0,0,400,400);g.drawImage(o[0],
b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7])}catch(C){console.dir(C)}}function i(){if(l<=p+p/10){d.remove();o.remove()}else if(m<=n+n/10){d.remove();o.remove()}else{f.mouseenter(function(){d.fadeIn(c.speed)}).mouseleave(function(){d.fadeOut(c.speed)}).mousemove(a.throttle(c.throttle,q));a(window).resize(function(){e=f.offset()})}}var g,e,k=(new Date).getTime(),f=a(this),d=a("<canvas>",{id:"viewer"+k,style:"display:none; position:absolute; "+c.canvas_style}),o,h,m,l,n,p,s=parseInt(c.width,10),v=parseInt(c.height,
10);(function(){if(/IMG/.test(a(this)[0].nodeName)===true){f.wrapAll(a("<div>",{id:"ql_zoom_"+k,"class":"ql_zoom_container"}));f=a("#ql_zoom_"+k)}d.appendTo(f);d.css({width:c.width,height:c.height});d[0].setAttribute("width",s);d[0].setAttribute("height",v);/static/.test(void 0)&&f.css("position","relative");f.css({overflow:"hidden"});e=f.offset();g=d.get()[0].getContext("2d");h=f.find("img").first();h.imagesLoaded(function(){p=h.height();n=h.width()});o=a("<img>",{src:h.data("url")?h.data("url"):
h.attr("src"),style:"display:none;"}).appendTo(f);o.imagesLoaded(function(){l=this.height();m=this.width();i()})})()})};a.fn.ql_zoom.defaultOptions={width:"200px",height:"200px",speed:"800",throttle:50,pointer:"crosshair",canvas_style:"border:1px solid #444;"}})(jQuery);
